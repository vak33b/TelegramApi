# üìö Telegram Downloader via Pyrogram + FastAPI

–ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç:

	‚Ä¢	–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ Telegram –æ–¥–∏–Ω —Ä–∞–∑ —á–µ—Ä–µ–∑ Pyrogram
	‚Ä¢	–∏—Å–∫–∞—Ç—å –∏ —Å–∫–∞—á–∏–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ Telegram-–∫–∞–Ω–∞–ª–æ–≤ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
	‚Ä¢	–≤—ã–∑—ã–≤–∞—Ç—å –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ HTTP-–∑–∞–ø—Ä–æ—Å—ã (FastAPI —Å–µ—Ä–≤–µ—Ä)
	‚Ä¢	–≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä—É—á–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ msg_id
	‚Ä¢	—Å–∫–∞—á–∏–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –ø–∞–ø–∫—É downloads/



## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

project_root/
~~~
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ config.py 		# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (API_ID, HASH, session name –∏ –¥—Ä.)
‚îÇ   ‚îú‚îÄ‚îÄ routes.py 		# –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ search_utils.py         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º)
‚îÇ   ‚îú‚îÄ‚îÄ server.py               # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ telegram_worker.py      # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ downloads/                  # –ü–∞–ø–∫–∞ –¥–ª—è —Å–∫–∞—á–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ requirements.txt		# –î–æ–∫—É–º–µ–Ω—Ç —Å –≤—Å–µ–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏
~~~

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
~~~
git clone https://github.com/yourusername/telegram-downloader.git
cd telegram-downloader
python -m venv .venv
.venv\Scripts\activate  # –∏–ª–∏ source .venv/bin/activate
pip install -r requirements.txt
~~~

## üîê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (app/config.py)
~~~
API_ID = 123456
API_HASH = "your_api_hash"
SESSION_NAME = "my_session"  # —Å–æ–∑–¥–∞—Å—Ç my_session.session
ALLOWED_EXTENSIONS = [".pdf", ".epub", ".djvu", ".mobi"]
~~~

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
~~~
uvicorn server:app --reload
~~~

## üì§ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã FastAPI

### 1. –°—Ç–∞—Ç—É—Å –∫–ª–∏–µ–Ω—Ç–∞

GET /status

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø–æ–¥–∫–ª—é—á—ë–Ω –ª–∏ Telegram-–∫–ª–∏–µ–Ω—Ç.

### 2. –ü–æ–∏—Å–∫ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ

POST /search

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
~~~
{
  "channel": "@your_channel",
  "keywords": ["python", "—É—á–µ–±–Ω–∏–∫", "–∏—Å—Ç–æ—Ä–∏—è"],
  "days_limit": 15
}
~~~
–†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —Å–ø–∏—Å–æ–∫ —Å–∫–∞—á–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

### 3. –†—É—á–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ

POST /manual_download?channel=@your_channel&msg_id=1234

–ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–∞—á–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ ID.

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞

GET /download/{filename}

–ü—Ä–∏–º–µ—Ä: http://localhost:8000/download/1234.pdf


## üìÅ –ö—É–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ñ–∞–π–ª—ã?

–í—Å–µ —Ñ–∞–π–ª—ã —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –≤ –ø–∞–ø–∫—É downloads/, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å server.py).

## üí¨ –ü—Ä–∏–º–µ—Ä —Ä—É—á–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ (–±–µ–∑ API)

–§–∞–π–ª: test_manual_download.py

python test_manual_download.py

## üß© –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
	‚Ä¢	pyrogram
	‚Ä¢	tgcrypto
	‚Ä¢	fastapi
	‚Ä¢	uvicorn


## üõ† –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
	‚Ä¢	database is locked ‚Üí –Ω–µ –∑–∞–ø—É—Å–∫–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
	‚Ä¢	Client is already connected ‚Üí –∏–∑–±–µ–≥–∞–π –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ start() –±–µ–∑ stop().

